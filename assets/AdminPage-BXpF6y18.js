import{j as e,A as ee,m as se}from"./motion-BKiMHsmd.js";import{r as l}from"./vendor-Dvo5_qfN.js";import{r as ae,g as te,a as le,b as re,c as de,d as ie,e as ce,f as ne,h as xe,i as oe,j as me,k as ge,l as R}from"./index-DktEilpJ.js";import{S as he}from"./SEO-T2NoOaf8.js";import{u as be}from"./router-B6ZdwQuO.js";import{n as ue,R as fe,o as B,c as $,j as je,p as o,g as E,m as h,q as O,E as M,r as pe}from"./icons-BWqGe2Oh.js";import"./three-Da21v-Wf.js";const ve=()=>window.location.pathname.includes("/admin"),Ne=()=>{window.location.href="/"},Ae=()=>{var H;const U=be(),[b,u]=l.useState([]),[F,f]=l.useState([]),[j,p]=l.useState([]),[v,N]=l.useState([]),[V,y]=l.useState(0),[w,k]=l.useState([]),[L,S]=l.useState([]),[m,D]=l.useState([]),[t,z]=l.useState([]),[d,C]=l.useState([]),[A,_]=l.useState(!0),[T,P]=l.useState(!1),[r,i]=l.useState("overview"),[q,J]=l.useState(!1);l.useEffect(()=>{(()=>{if(!ve()){window.location.href="/";return}})()},[]),l.useEffect(()=>{const s=setTimeout(()=>J(!0),3e3);return()=>clearTimeout(s)},[]);const x=async()=>{try{const s=await Promise.allSettled([le(),re(),de(),ie(),ce(),ne(),xe(),oe(),me(),ge()]);s[0].status==="fulfilled"?u(s[0].value):u([]),s[1].status==="fulfilled"?f(s[1].value):f([]),s[2].status==="fulfilled"?p(s[2].value):p([]),s[3].status==="fulfilled"?N(s[3].value):N([]),s[4].status==="fulfilled"?y(s[4].value):y(0),s[5].status==="fulfilled"?k(s[5].value.slice(0,20)):k([]),s[6].status==="fulfilled"?S(s[6].value):S([]),s[7].status==="fulfilled"?D(s[7].value):D([]),s[8].status==="fulfilled"?z(s[8].value):z([]),s[9].status==="fulfilled"?C(s[9].value):C([]);const a=s.filter(c=>c.status==="rejected").length}catch{u([]),f([]),p([]),N([]),y(0),k([]),S([]),D([]),z([]),C([])}finally{_(!1),P(!1)}};l.useEffect(()=>{x()},[]),l.useEffect(()=>{const s=setInterval(()=>{A||(P(!0),x())},3e5);return()=>clearInterval(s)},[A]);const W=()=>{P(!0),x()},G=async()=>{try{await R("/admin"),alert("テストページビューを記録しました。更新ボタンを押して確認してください。")}catch{alert("テストページビューの記録に失敗しました。")}},K=()=>{alert("デバッグ情報をコンソールに出力しました。F12で確認してください。")},Q=()=>{R(U.pathname).then(()=>{setTimeout(()=>{x()},1e3)}).catch(s=>{})},X=async()=>{const s=["/","/profile","/services","/contact","/blog","/what-is-coaching","/admin"];for(const a of s)try{await R(a),await new Promise(c=>setTimeout(c,100))}catch{}setTimeout(()=>{x()},1e3)},Y=s=>["日","月","火","水","木","金","土"][s]||"不明",I=s=>{switch(s){case"desktop":return e.jsx(o,{size:16});case"mobile":return e.jsx(pe,{size:16});case"tablet":return e.jsx(o,{size:16});default:return e.jsx(o,{size:16})}},n=s=>s?{"/":"ホーム","/profile":"プロフィール","/services":"サービス","/contact":"お問い合わせ","/blog":"ブログ","/what-is-coaching":"コーチングとは","/admin":"管理画面"}[s]||s:"不明",g=s=>Math.max(...s.map(a=>a.count),1),Z=s=>new Date(s).toLocaleString("ja-JP");return A?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#0a0a0a] to-[#181818] text-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#d4af37] mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"分析データを読み込み中..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#0a0a0a] to-[#181818] text-white",children:[e.jsx(he,{title:"管理者分析 | 矢田谷充則のコーチング",description:"管理者専用のアクセス分析ダッシュボード"}),q&&e.jsx("div",{className:"bg-black/50 backdrop-blur-sm border-b border-[#d4af37]/30 p-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ue,{size:32,className:"text-[#d4af37]"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-[#d4af37]",children:"管理者分析ダッシュボード"}),e.jsx("p",{className:"text-gray-400",children:"リアルタイムアクセス分析"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"px-3 py-2 rounded-md border border-[#d4af37]/30 bg-black/40",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"データソース"}),e.jsx("div",{className:"text-sm font-semibold",children:e.jsx("span",{className:"text-green-400",children:"Supabase（全端末集計）"})})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-[#d4af37]",children:V.toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-400",children:"累積PV"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:W,disabled:T,className:"px-4 py-2 bg-blue-700 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(fe,{size:16,className:T?"animate-spin":""}),T?"更新中...":"更新"]}),e.jsx("button",{onClick:Ne,className:"px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"ログアウト"})]}),e.jsxs("details",{className:"group",children:[e.jsx("summary",{className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-700 transition-colors cursor-pointer text-sm",children:"開発者ツール"}),e.jsx("div",{className:"absolute top-full right-0 mt-2 p-2 bg-gray-800 rounded-lg shadow-lg border border-gray-600 min-w-max z-50",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("button",{onClick:G,className:"px-3 py-2 bg-green-700 text-white rounded hover:bg-green-600 transition-colors text-sm",children:"テストPV追加"}),e.jsx("button",{onClick:K,className:"px-3 py-2 bg-purple-700 text-white rounded hover:bg-purple-600 transition-colors text-sm",children:"デバッグデータ"}),e.jsx("button",{onClick:Q,className:"px-3 py-2 bg-red-700 text-white rounded hover:bg-red-600 transition-colors text-sm",children:"リアルタイム確認"}),e.jsx("button",{onClick:X,className:"px-3 py-2 bg-orange-700 text-white rounded hover:bg-orange-600 transition-colors text-sm",children:"全ページテスト"}),e.jsx("button",{onClick:ae,className:"px-3 py-2 bg-red-700 text-white rounded hover:bg-red-600 transition-colors text-sm",children:"データリセット"})]})})]})]})]})})}),e.jsx("div",{className:"bg-black/30 backdrop-blur-sm border-b border-[#d4af37]/20 p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[te()!=="supabase",e.jsxs("div",{className:"flex gap-2 overflow-x-auto",children:[e.jsxs("button",{onClick:()=>i("overview"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm transition-all whitespace-nowrap ${r==="overview"?"bg-[#d4af37] text-[#181818]":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[e.jsx(B,{size:16}),"概要"]}),e.jsxs("button",{onClick:()=>i("hourly"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm transition-all whitespace-nowrap ${r==="hourly"?"bg-[#d4af37] text-[#181818]":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[e.jsx($,{size:16}),"時間帯分析"]}),e.jsxs("button",{onClick:()=>i("daily"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm transition-all whitespace-nowrap ${r==="daily"?"bg-[#d4af37] text-[#181818]":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[e.jsx(je,{size:16}),"曜日分析"]}),e.jsxs("button",{onClick:()=>i("device"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm transition-all whitespace-nowrap ${r==="device"?"bg-[#d4af37] text-[#181818]":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[e.jsx(o,{size:16}),"デバイス分析"]}),e.jsxs("button",{onClick:()=>i("browser"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm transition-all whitespace-nowrap ${r==="browser"?"bg-[#d4af37] text-[#181818]":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[e.jsx(E,{size:16}),"ブラウザ分析"]}),e.jsxs("button",{onClick:()=>i("recent"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm transition-all whitespace-nowrap ${r==="recent"?"bg-[#d4af37] text-[#181818]":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[e.jsx(h,{size:16}),"最近のアクセス"]}),e.jsxs("button",{onClick:()=>i("funnel"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm transition-all whitespace-nowrap ${r==="funnel"?"bg-[#d4af37] text-[#181818]":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[e.jsx(O,{size:16}),"ファネル分析"]}),e.jsxs("button",{onClick:()=>i("pages"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm transition-all whitespace-nowrap ${r==="pages"?"bg-[#d4af37] text-[#181818]":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[e.jsx(M,{size:16}),"ページ別分析"]})]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx(ee,{mode:"wait",children:e.jsxs(se.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[r==="overview"&&e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-black/50 backdrop-blur-sm border border-[#d4af37]/30 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(M,{size:24,className:"text-[#d4af37]"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:V.toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-400",children:"累積PV"})]})]})}),e.jsx("div",{className:"bg-black/50 backdrop-blur-sm border border-[#d4af37]/30 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(h,{size:24,className:"text-[#d4af37]"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:w.length}),e.jsx("div",{className:"text-sm text-gray-400",children:"最近のアクセス"})]})]})}),e.jsx("div",{className:"bg-black/50 backdrop-blur-sm border border-[#d4af37]/30 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(o,{size:24,className:"text-[#d4af37]"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:j.length}),e.jsx("div",{className:"text-sm text-gray-400",children:"デバイス種類"})]})]})}),e.jsx("div",{className:"bg-black/50 backdrop-blur-sm border border-[#d4af37]/30 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(E,{size:24,className:"text-[#d4af37]"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:v.length}),e.jsx("div",{className:"text-sm text-gray-400",children:"ブラウザ種類"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"bg-black/50 backdrop-blur-sm border border-[#d4af37]/30 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(O,{size:24,className:"text-[#d4af37]"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:L.length}),e.jsx("div",{className:"text-sm text-gray-400",children:"流入元数"})]})]})}),e.jsx("div",{className:"bg-black/50 backdrop-blur-sm border border-[#d4af37]/30 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(h,{size:24,className:"text-[#d4af37]"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:m.filter(s=>s.source==="instagram"||s.source==="x"||s.source==="tiktok").length}),e.jsx("div",{className:"text-sm text-gray-400",children:"SNS流入"})]})]})}),e.jsx("div",{className:"bg-black/50 backdrop-blur-sm border border-[#d4af37]/30 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(E,{size:24,className:"text-[#d4af37]"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:m.filter(s=>s.source==="google"||s.source==="yahoo").length}),e.jsx("div",{className:"text-sm text-gray-400",children:"検索流入"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"bg-black/50 backdrop-blur-sm border border-[#d4af37]/30 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(M,{size:24,className:"text-[#d4af37]"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:t.length}),e.jsx("div",{className:"text-sm text-gray-400",children:"アクティブページ数"})]})]})}),e.jsx("div",{className:"bg-black/50 backdrop-blur-sm border border-[#d4af37]/30 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($,{size:24,className:"text-[#d4af37]"}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-white",children:[d.length>0&&d[0]?Math.floor(d[0].avgTime/60):0,"分"]}),e.jsx("div",{className:"text-sm text-gray-400",children:"最長滞在時間"})]})]})}),e.jsx("div",{className:"bg-black/50 backdrop-blur-sm border border-[#d4af37]/30 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(B,{size:24,className:"text-[#d4af37]"}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-white",children:[t.length>0?Math.max(...t.map(s=>s.bounceRate)).toFixed(1):0,"%"]}),e.jsx("div",{className:"text-sm text-gray-400",children:"最高離脱率"})]})]})})]})]}),r==="hourly"&&e.jsxs("div",{className:"bg-black/50 backdrop-blur-sm border border-[#d4af37]/30 rounded-xl p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-[#d4af37] mb-6",children:"時間帯別アクセス数"}),b.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx($,{size:48,className:"text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400 text-lg",children:"データがありません"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"アクセスがあると表示されます"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:b.map(s=>{const a=s.count/g(b)*100;return e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-lg font-medium text-white",children:[s.hour.toString().padStart(2,"0"),":00"]}),e.jsx("span",{className:"text-[#d4af37] font-bold",children:s.count})]}),e.jsx("div",{className:"bg-gray-700 rounded-full h-3",children:e.jsx("div",{className:"bg-gradient-to-r from-[#d4af37] to-[#ffd700] h-3 rounded-full transition-all duration-500",style:{width:`${a}%`}})})]},s.hour)})})]}),r==="daily"&&e.jsxs("div",{className:"bg-black/50 backdrop-blur-sm border border-[#d4af37]/30 rounded-xl p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-[#d4af37] mb-6",children:"曜日別アクセス数"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:F.map(s=>{const a=s.count/g(F)*100;return e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-lg font-medium text-white",children:Y(s.day)}),e.jsx("span",{className:"text-[#d4af37] font-bold",children:s.count})]}),e.jsx("div",{className:"bg-gray-700 rounded-full h-3",children:e.jsx("div",{className:"bg-gradient-to-r from-[#d4af37] to-[#ffd700] h-3 rounded-full transition-all duration-500",style:{width:`${a}%`}})})]},s.day)})})]}),r==="device"&&e.jsxs("div",{className:"bg-black/50 backdrop-blur-sm border border-[#d4af37]/30 rounded-xl p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-[#d4af37] mb-6",children:"デバイス別アクセス数"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:j.map(s=>{const a=s.count/g(j)*100;return e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[I(s.device),e.jsx("span",{className:"text-lg font-medium text-white",children:s.device==="desktop"?"PC":s.device==="mobile"?"スマホ":s.device==="tablet"?"タブレット":"その他"})]}),e.jsx("div",{className:"text-2xl font-bold text-[#d4af37] mb-2",children:s.count}),e.jsx("div",{className:"bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-[#d4af37] to-[#ffd700] h-2 rounded-full transition-all duration-500",style:{width:`${a}%`}})})]},s.device)})})]}),r==="browser"&&e.jsxs("div",{className:"bg-black/50 backdrop-blur-sm border border-[#d4af37]/30 rounded-xl p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-[#d4af37] mb-6",children:"ブラウザ別アクセス数"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(s=>{const a=s.count/g(v)*100;return e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-lg font-medium text-white mb-3",children:s.browser}),e.jsx("div",{className:"text-2xl font-bold text-[#d4af37] mb-2",children:s.count}),e.jsx("div",{className:"bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-[#d4af37] to-[#ffd700] h-2 rounded-full transition-all duration-500",style:{width:`${a}%`}})})]},s.browser)})})]}),r==="recent"&&e.jsxs("div",{className:"bg-black/50 backdrop-blur-sm border border-[#d4af37]/30 rounded-xl p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-[#d4af37] mb-6",children:"最近のアクセス"}),w.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(h,{size:48,className:"text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400 text-lg",children:"アクセスデータがありません"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"ページを訪問すると表示されます"})]}):e.jsx("div",{className:"space-y-4",children:w.map((s,a)=>e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[I(s.device_type),e.jsx("span",{className:"text-sm text-gray-400",children:s.browser})]}),e.jsx("span",{className:"text-sm text-gray-400",children:"|"}),e.jsx("span",{className:"text-sm text-gray-400",children:s.os})]}),e.jsx("span",{className:"text-sm text-gray-400",children:Z(s.timestamp)})]}),e.jsx("div",{className:"text-white font-medium",children:s.page_path}),e.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:["リファラー:"," ",s.referrer==="direct"?"直接アクセス":s.referrer]})]},a))})]}),r==="funnel"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-black/50 backdrop-blur-sm border border-[#d4af37]/30 rounded-xl p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-[#d4af37] mb-6",children:"流入元別ファネル分析"}),e.jsx("div",{className:"space-y-4",children:L.map(s=>e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-lg font-medium text-white",children:s.platform}),e.jsx("span",{className:"text-sm text-gray-400",children:s.source})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-[#d4af37]",children:s.inflow}),e.jsx("div",{className:"text-sm text-gray-400",children:"流入数"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:s.view}),e.jsx("div",{className:"text-sm text-gray-400",children:"閲覧数"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-green-400",children:s.conversion}),e.jsx("div",{className:"text-sm text-gray-400",children:"コンバージョン"})]})]}),s.inflow>0&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"text-sm text-gray-400 mb-1",children:["コンバージョン率:"," ",(s.conversion/s.inflow*100).toFixed(1),"%"]}),e.jsx("div",{className:"bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-green-400 to-green-600 h-2 rounded-full",style:{width:`${s.conversion/s.inflow*100}%`}})})]})]},s.source))})]}),e.jsxs("div",{className:"bg-black/50 backdrop-blur-sm border border-[#d4af37]/30 rounded-xl p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-[#d4af37] mb-6",children:"リファラー別アクセス数"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(s=>{const a=s.count/Math.max(...m.map(c=>c.count),1)*100;return e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-lg font-medium text-white mb-3",children:s.platform}),e.jsx("div",{className:"text-2xl font-bold text-[#d4af37] mb-2",children:s.count}),e.jsx("div",{className:"bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-[#d4af37] to-[#ffd700] h-2 rounded-full transition-all duration-500",style:{width:`${a}%`}})})]},s.source)})})]})]}),r==="pages"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-black/50 backdrop-blur-sm border border-[#d4af37]/30 rounded-xl p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-[#d4af37] mb-6",children:"ページ別アクセス数"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(s=>{const a=s.count/Math.max(...t.map(c=>c.count),1)*100;return e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-lg font-medium text-white",children:n(s.page)}),e.jsx("span",{className:"text-sm text-gray-400",children:s.page})]}),e.jsx("div",{className:"text-2xl font-bold text-[#d4af37] mb-2",children:s.count}),e.jsx("div",{className:"bg-gray-700 rounded-full h-2 mb-2",children:e.jsx("div",{className:"bg-gradient-to-r from-[#d4af37] to-[#ffd700] h-2 rounded-full transition-all duration-500",style:{width:`${a}%`}})}),e.jsxs("div",{className:"text-sm text-gray-400",children:["離脱率: ",s.bounceRate.toFixed(1),"%"]})]},s.page)})}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-800/30 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"ページ別詳細情報"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"総ページ数:"}),e.jsx("span",{className:"text-white ml-2",children:t.length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"総アクセス数:"}),e.jsx("span",{className:"text-white ml-2",children:t.reduce((s,a)=>s+a.count,0)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"平均離脱率:"}),e.jsxs("span",{className:"text-white ml-2",children:[t.length>0?(t.reduce((s,a)=>s+a.bounceRate,0)/t.length).toFixed(1):0,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"最も人気のページ:"}),e.jsx("span",{className:"text-white ml-2",children:t.length>0&&t[0]?n(t[0].page):"なし"})]})]})]})]}),e.jsxs("div",{className:"bg-black/50 backdrop-blur-sm border border-[#d4af37]/30 rounded-xl p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-[#d4af37] mb-6",children:"ページ別エンゲージメント"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.slice(0,9).map(s=>e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-lg font-medium text-white",children:n(s.page)}),e.jsx("span",{className:"text-sm text-gray-400",children:s.page})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-xl font-bold text-blue-400",children:[Math.floor(s.avgTime/60),":",(s.avgTime%60).toString().padStart(2,"0")]}),e.jsx("div",{className:"text-sm text-gray-400",children:"平均滞在時間"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-bold text-green-400",children:s.sessions}),e.jsx("div",{className:"text-sm text-gray-400",children:"セッション数"})]})]})]},s.page))})]}),e.jsxs("div",{className:"bg-black/50 backdrop-blur-sm border border-[#d4af37]/30 rounded-xl p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-[#d4af37] mb-6",children:"ページ別分析サマリー"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"最も人気のページ"}),t.length>0&&t[0]&&e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-[#d4af37]",children:n(t[0].page)}),e.jsxs("div",{className:"text-sm text-gray-400",children:[t[0].count," アクセス"]})]})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"最も滞在時間が長いページ"}),d.length>0&&d[0]&&e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-[#d4af37]",children:n(d[0].page)}),e.jsxs("div",{className:"text-sm text-gray-400",children:[Math.floor(d[0].avgTime/60),":",(d[0].avgTime%60).toString().padStart(2,"0")]})]})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"離脱率が最も高いページ"}),t.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-[#d4af37]",children:n((H=t.find(s=>s.bounceRate===Math.max(...t.map(a=>a.bounceRate))))==null?void 0:H.page)}),e.jsxs("div",{className:"text-sm text-gray-400",children:[Math.max(...t.map(s=>s.bounceRate)).toFixed(1),"% 離脱率"]})]})]})]})]})]})]},r)})})]})};export{Ae as default};
